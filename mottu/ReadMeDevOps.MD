# Sistema de Mapeamento Inteligente de P√°tio Mottu

<div align="center">
  <img src="https://img.shields.io/badge/Java-17-orange" alt="Java 17">
  <img src="https://img.shields.io/badge/Spring_Boot-3.2.3-green" alt="Spring Boot 3.2.3">
  <img src="https://img.shields.io/badge/Docker-Ready-blue" alt="Docker Ready">
  <img src="https://img.shields.io/badge/Azure-Deployed-blue" alt="Azure Deployed">
  <img src="https://img.shields.io/badge/Maven-Project-purple" alt="Maven Project">
</div>

## üë• Grupo
- **Daniel da Silva Barros | RM 556152**
- **Luccas de Alencar Rufino | RM 558253**

## üìù Descri√ß√£o do Projeto

A Mottu, l√≠der em aluguel de motocicletas para entregadores de aplicativo, enfrenta desafios na localiza√ß√£o manual de motos em seus p√°tios, causando perdas de frotas e retrabalhos operacionais. Este projeto implementa um Sistema de Mapeamento Inteligente de P√°tio que integra:

- **Vis√£o Computacional:** captura e reconhecimento autom√°tico de motocicletas (placa, modelo).
- **API REST:** camadas Java Spring Boot para gerenciar entidades cr√≠ticas: Moto, C√¢mera, Usu√°rio, Cargo, Registro e Reconhecimento.
- **Auditoria:** Log de Altera√ß√µes para rastrear modifica√ß√µes de dados.
- **Documenta√ß√£o:** interface Swagger para explorar os endpoints interativamente.

## ‚≠ê Principais Benef√≠cios

- Localiza√ß√£o em segundos em vez de minutos
- Redu√ß√£o de perdas e erros de invent√°rio
- Aumento de at√© 40% na produtividade operacional
- Escalabilidade para mais de 100 filiais
- Rastreabilidade e auditoria completa


## ‚öôÔ∏è Tecnologias e Depend√™ncias

- Java 17
- Spring Boot 3.2.3 (Web, Data JPA, Validation, Cache, Actuator)
- H2 Database (mem√≥ria, dev)
- Hibernate ORM 6
- Caffeine Cache
- Springdoc OpenAPI 2.2.0 (Swagger UI)
- Lombok (facilita getters/setters)
- Maven (gerenciamento de depend√™ncias)
- Docker e Docker Compose
- Azure Virtual Machine (Ubuntu 22.04, Standard_B2s)

## üèóÔ∏è Arquitetura

O projeto segue uma arquitetura em camadas com:

- **Controller:** Endpoints REST da API
- **Service:** L√≥gica de neg√≥cios e processamento
- **Repository:** Intera√ß√£o com o banco de dados
- **Model:** Entidades e objetos de transfer√™ncia de dados (DTOs)
- **Config:** Configura√ß√µes do Spring e cache
- **Exception:** Tratamento centralizado de exce√ß√µes

## üöÄ Instala√ß√£o e Execu√ß√£o

### ‚òÅÔ∏è Deployment na Azure

O projeto inclui scripts para deployment autom√°tico em Azure Virtual Machine, configurando todo o ambiente necess√°rio.

**Pr√©-requisitos:**
- Azure CLI instalado e configurado
- Acesso √† subscription do Azure

**Passos para deployment:**

1. Clone o reposit√≥rio:
```bash
git clone https://github.com/LuccasAlencar/MottuVision.git
cd MottuVision/mottu/scripts
```

2. D√™ permiss√£o de execu√ß√£o ao script de deploy:
```bash
chmod +x deploy.sh
```

3. Execute o script de deployment:
```bash
bash deploy.sh
```

4. Durante a execu√ß√£o:
   - Confirme a cria√ß√£o dos recursos com "yes" quando solicitado
   - Digite a senha `Fiap2TDSB2025` quando solicitado (v√°rias vezes durante o processo)

**Importante:** O script automaticamente executar√° o `docker compose up -d --build` na VM, n√£o sendo necess√°rio executar este comando manualmente.

5. Ap√≥s a conclus√£o bem-sucedida, a aplica√ß√£o estar√° dispon√≠vel em:
```
http://<IP-PUBLICO-DA-VM>:3000
```

**Para remover os recursos da Azure:**
```bash
chmod +x delete-vm.sh
bash delete-vm.sh
```
## üåê Acessando a Aplica√ß√£o

### P√°gina Principal

Ap√≥s o deployment, a aplica√ß√£o estar√° dispon√≠vel na p√°gina inicial:

```
http://localhost:3000/
```

ou via Azure:

```
http://<IP-PUBLICO-DA-VM>:3000/
```

### üìñ Documenta√ß√£o Swagger

A documenta√ß√£o interativa dos endpoints estar√° dispon√≠vel em:

```
http://localhost:3000/swagger-ui/index.html
```

ou via Azure:

```
http://<IP-PUBLICO-DA-VM>:3000/swagger-ui/index.html
```

A documenta√ß√£o permite explorar e testar todos os endpoints da API de forma interativa.




### üíª Execu√ß√£o Local

**Pr√©-requisitos:**
- Java 17 JDK instalado
- Maven configurado

**Clone o reposit√≥rio:**
```bash
git clone https://github.com/LuccasAlencar/MottuVision.git
cd MottuVision/mottu/scripts
```

**Build e Run:**
```bash
mvn clean spring-boot:run
```

## üìö Infraestrutura na Azure

O projeto utiliza:

- **Resource Group:** `rg-MottuVision-Challenge-1Sem-2tdsb-brazilsouth`
- **Regi√£o:** `brazilsouth`
- **VM:** `Standard_B2s` rodando Ubuntu 22.04
- **Rede:** VNet, Subnet e NSG configurados automaticamente
- **Portas abertas:** 22 (SSH) e 3000 (API)

## üîß Configura√ß√£o do Ambiente na VM Azure

Os scripts de deployment realizar√£o automaticamente:

1. Cria√ß√£o de Resource Group, VNet, Subnet e NSG
2. Provisionamento da VM com Ubuntu 22.04
3. Instala√ß√£o do Docker e Docker Compose
4. Configura√ß√£o de permiss√µes e diret√≥rios
5. C√≥pia dos arquivos de configura√ß√£o Docker para a VM
6. Build e execu√ß√£o da aplica√ß√£o via Docker Compose


## üìù Entidades Principais

- **Moto:** Informa√ß√µes sobre as motocicletas (placa, modelo, status)
- **C√¢mera:** Dispositivos de captura instalados no p√°tio
- **Usu√°rio:** Funcion√°rios/operadores do sistema
- **Cargo:** Fun√ß√µes e permiss√µes de usu√°rios
- **Registro:** Hist√≥rico de movimenta√ß√µes de motos
- **Reconhecimento:** Detec√ß√µes realizadas pelo sistema de vis√£o computacional
- **LogsAltera√ß√µes:** Detec√ß√µes de quando algo √© atualizado manualmente

---

Desenvolvido com ‚òï e ‚ô•Ô∏è por Daniel Barros e Luccas Rufino.
